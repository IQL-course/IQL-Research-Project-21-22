source('code/analysis/R_functions.R', encoding="utf-8")
wd()
getwd()
setwd("/Users/sonia/Library/Mobile Documents/com~apple~CloudDocs/University/FIB/IQL/IQLproject/IQL-Research-Project-21-22")
source('code/analysis/R_functions.R', encoding="utf-8")
filter <- T
# GLOBALS  --------------------------------------------------------
langs_df_pud <- read.csv(paste0(which_folder('data',filter),"/descriptive_tables/pud.csv"))
langs_df_cv <- read.csv(paste0(which_folder('data',filter),"/descriptive_tables/common_voice.csv")) %>%
shorten_names()
langs_df_pud
res <- lapply(COLLS,function(collection) {
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
lapply(langs_df$language, function(language) {
iso_code    <- langs_df$iso_code[langs_df$language==language]
alternative <- if (stringr::str_detect(language,'-')) sub(".*-","",language) else NULL
str_suffix  <- ifelse (is.null(alternative),'',paste0('-',alternative))
df <- read.csv(paste0('data/non_filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv')) %>%
mutate(Freq=log10(frequency)) %>% arrange(desc(Freq))
df$group_opt <- Ckmeans.1d.dp(df$Freq, 2)$cluster
df <- filter(df,group_opt == 2)
alphabet <- df[,c(1,2,3)]
print(paste0('data/filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv'))
write.csv(alphabet, paste0('data/filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv'),row.names = FALSE)
})
})
collection <- 'PUD'
COLLS
collection <- 'pud'
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
langs_df
langs_df
language <- 'Arabic'
iso_code    <- langs_df$iso_code[langs_df$language==language]
iso_code
alternative <- if (stringr::str_detect(language,'-')) sub(".*-","",language) else NULL
alternative
str_suffix  <- ifelse (is.null(alternative),'',paste0('-',alternative))
str_suffix
df <- read.csv(paste0('data/non_filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv')) %>%
mutate(Freq=log10(frequency)) %>% arrange(desc(Freq))
df
read.csv(paste0('data/non_filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv'))
Sys.setlocale("LC_ALL","English")
read.csv(paste0('data/non_filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv'))
df <- read.csv(paste0('data/non_filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv')) %>%
mutate(Freq=log10(frequency)) %>% arrange(desc(Freq))
df$group_opt <- Ckmeans.1d.dp(df$Freq, 2)$cluster
df <- filter(df,group_opt == 2)
df
alphabet <- df[,c(1,2,3)]
alphabet
write.csv(alphabet, paste0('data/filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv'),row.names = FALSE)
collection
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
lapply(langs_df$language, function(language) {
iso_code    <- langs_df$iso_code[langs_df$language==language]
alternative <- if (stringr::str_detect(language,'-')) sub(".*-","",language) else NULL
str_suffix  <- ifelse (is.null(alternative),'',paste0('-',alternative))
df <- read.csv(paste0('data/non_filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv')) %>%
mutate(Freq=log10(frequency)) %>% arrange(desc(Freq))
df$group_opt <- Ckmeans.1d.dp(df$Freq, 2)$cluster
df <- filter(df,group_opt == 2)
alphabet <- df[,c(1,2,3)]
print(paste0('data/filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv'))
write.csv(alphabet, paste0('data/filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv'),row.names = FALSE)
})
Sys.setlocale("LC_ALL","English")
iso_code
read.csv(paste0('data/non_filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv'),encoding = "UTF-8")
df <- read.csv(paste0('data/non_filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv'),sep=",") %>%
mutate(Freq=log10(frequency)) %>% arrange(desc(Freq))
df
df <- read.csv(paste0('data/non_filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv'),locale = locale(encoding = "UTF-8")) %>%
mutate(Freq=log10(frequency)) %>% arrange(desc(Freq))
Sys.setlocale("LC_ALL","English")
Sys.getlocale()
Sys.setlocale("LC_MESSAGES", 'en_GB.UTF-8')
Sys.setenv(LANG = "en_US.UTF-8")
df <- read.csv(paste0('data/non_filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv')) %>%
mutate(Freq=log10(frequency)) %>% arrange(desc(Freq))
df
res <- lapply(COLLS,function(collection) {
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
lapply(langs_df$language, function(language) {
iso_code    <- langs_df$iso_code[langs_df$language==language]
alternative <- if (stringr::str_detect(language,'-')) sub(".*-","",language) else NULL
str_suffix  <- ifelse (is.null(alternative),'',paste0('-',alternative))
df <- read.csv(paste0('data/non_filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv')) %>%
mutate(Freq=log10(frequency)) %>% arrange(desc(Freq))
df$group_opt <- Ckmeans.1d.dp(df$Freq, 2)$cluster
df <- filter(df,group_opt == 2)
alphabet <- df[,c(1,2,3)]
print(paste0('data/filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv'))
write.csv(alphabet, paste0('data/filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv'),row.names = FALSE)
})
})
res <- lapply(COLLS,function(collection) {
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
parameters <- lapply(langs_df$language, function(language) {
iso_code    <- langs_df$iso_code[langs_df$language==language]
alternative <- if (stringr::str_detect(language,'-')) sub(".*-","",language) else NULL
str_suffix  <- ifelse (is.null(alternative),'',paste0('-',alternative))
file <- paste0(iso_code,str_suffix,'-character.csv')
df   <- read.csv(paste0(which_folder('data',filter),'/alphabets/',collection,'/',file))
alphabet_size <- nrow(df)
list("language"=language, 'A'=alphabet_size)
})
df = do.call(rbind.data.frame,parameters)
write.csv(df, paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'))
})
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
sum_coll <- langs_df %>% mutate(iso_code = NULL) %>% rename(T = X.tokens, n = X.types)
sum_coll
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'))
sum_coll$A <- A_coll$A
sum_coll <- sum_coll[,c('language','family','script','A','n','T')] %>%
arrange(family,script,language)
sum_coll
filter <- F
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
sum_coll <- langs_df %>% mutate(iso_code = NULL) %>% rename(T = X.tokens, n = X.types)
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'))
sum_coll$A <- A_coll$A
sum_coll <- sum_coll[,c('language','family','script','A','n','T')] %>%
arrange(family,script,language)
sum_coll
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
langs_df
sum_coll <- langs_df %>% mutate(iso_code = NULL) %>% rename(T = X.tokens, n = X.types)
filter
filter <- T
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'))
A_coll
sum_coll
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'),row.names = F)
A_coll
sum_coll
A_coll
View(A_coll)
merge(sum_coll, A_coll, 'language')
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'),row.names = NULL)
A_coll
res <- lapply(COLLS,function(collection) {
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
parameters <- lapply(langs_df$language, function(language) {
iso_code    <- langs_df$iso_code[langs_df$language==language]
alternative <- if (stringr::str_detect(language,'-')) sub(".*-","",language) else NULL
str_suffix  <- ifelse (is.null(alternative),'',paste0('-',alternative))
file <- paste0(iso_code,str_suffix,'-character.csv')
df   <- read.csv(paste0(which_folder('data',filter),'/alphabets/',collection,'/',file))
alphabet_size <- nrow(df)
list("language"=language, 'A'=alphabet_size)
})
df = do.call(rbind.data.frame,parameters)
write.csv(df, paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'),row.names = F)
})
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'))
A_coll
sum_coll <- merge(sum_coll, A_coll, 'language')
sum_coll
filter <- F
res <- lapply(COLLS,function(collection) {
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
parameters <- lapply(langs_df$language, function(language) {
iso_code    <- langs_df$iso_code[langs_df$language==language]
alternative <- if (stringr::str_detect(language,'-')) sub(".*-","",language) else NULL
str_suffix  <- ifelse (is.null(alternative),'',paste0('-',alternative))
file <- paste0(iso_code,str_suffix,'-character.csv')
df   <- read.csv(paste0(which_folder('data',filter),'/alphabets/',collection,'/',file))
alphabet_size <- nrow(df)
list("language"=language, 'A'=alphabet_size)
})
df = do.call(rbind.data.frame,parameters)
write.csv(df, paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'),row.names = F)
})
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'))
A_coll
collection
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
sum_coll <- langs_df %>% mutate(iso_code = NULL) %>% rename(T = X.tokens, n = X.types)
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'))
sum_coll <- merge(sum_coll, A_coll, 'language')
sum_coll <- sum_coll[,c('language','family','script','A','n','T')] %>%
arrange(family,script,language)
sum_coll
filtered <- T
filter <- T
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
sum_coll <- langs_df %>% mutate(iso_code = NULL) %>% rename(T = X.tokens, n = X.types)
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'))
sum_coll <- merge(sum_coll, A_coll, 'language')
sum_coll <- sum_coll[,c('language','family','script','A','n','T')] %>%
arrange(family,script,language)
sum_coll
collection <- 'cv'
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
sum_coll <- langs_df %>% mutate(iso_code = NULL) %>% rename(T = X.tokens, n = X.types)
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'))
sum_coll <- merge(sum_coll, A_coll, 'language')
sum_coll <- sum_coll[,c('language','family','script','A','n','T')] %>%
arrange(family,script,language)
sum_coll
collection
collection <- 'pud'
length_defs
length_def <- if (collection=='pud') 'characters' else length_def
length_def
get_filtered_ori_df(collection,length_def) %>%
ggplot(aes(original,filtered,label=language)) +
geom_abline(intercept = 0,slope=1,color='purple') + geom_point() + geom_text_repel(size=3) +
theme(legend.position = 'bottom') + guides(color=guide_legend(nrow=2,byrow=TRUE))+
facet_wrap(~score,scales='free',labeller = labeller(score=scores_labs))
corr_type <-
corr_type <- 'kendall'
# pud
collection <- 'pud'
df <- read_file('corr',collection,filter,corr_type=corr_type)
plot_corr_significance(df, corr_type)
