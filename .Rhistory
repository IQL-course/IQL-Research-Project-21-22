source('code/analysis/R_functions.R', encoding="utf-8")
setwd("/Users/sonia/Library/Mobile Documents/com~apple~CloudDocs/University/FIB/IQL/IQLproject/IQL-Research-Project-21-22")
source('code/analysis/R_functions.R', encoding="utf-8")
filter <- T
# GLOBALS  --------------------------------------------------------
langs_df_pud <- read.csv(paste0(which_folder('data',filter),"/descriptive_tables/pud.csv"))
langs_df_cv <- read.csv(paste0(which_folder('data',filter),"/descriptive_tables/common_voice.csv")) %>%
shorten_names()
collection <- 'pud'
params_df <-   read.csv(paste0(which_folder('results',filter),'/coll_summary_',collection,'.csv')) %>%
select(-X,-family,-script)
plot_corr <- 'pearson'
plot_corr_suffix <- paste0('_',plot_corr)
length_def <- 'characters'
# data
params_df <- params_df %>%
filter(language %!in% c('Japanese-strokes','Chinese-strokes','Chinese-pinyin','Japanese-romaji'))
opt_df <- read_file('opt',collection,filter,length_def) %>% select(language,eta,psi,omega)
df <- merge(params_df,opt_df, by='language') %>%  select(-language)
# plot
plot_correlogram(df,plot_corr,'params',HB_correct=T,8,21,18)
opt_df
params_df
langs_df_pud
# + filter alphabet with k-means
print('file: alphabets')
res <- lapply(COLLS,function(collection) {
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
lapply(langs_df$language, function(language) {
iso_code    <- langs_df$iso_code[langs_df$language==language]
alternative <- if (stringr::str_detect(language,'-')) sub(".*-","",language) else NULL
str_suffix  <- ifelse (is.null(alternative),'',paste0('-',alternative))
df <- read.csv(paste0('data/non_filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv')) %>%
mutate(Freq=log10(frequency)) %>% arrange(desc(Freq))
df$group_opt <- Ckmeans.1d.dp(df$Freq, 2)$cluster
df <- filter(df,group_opt == 2)
alphabet <- df[,c(1,2,3)]
print(paste0('data/filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv'))
write.csv(alphabet, paste0('data/filtered/alphabets/',collection,'/',iso_code,str_suffix,'-character.csv'),row.names = FALSE)
})
})
# + alphabet sizes
print('file: alphabets sizes')
res <- lapply(COLLS,function(collection) {
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
parameters <- lapply(langs_df$language, function(language) {
iso_code    <- langs_df$iso_code[langs_df$language==language]
alternative <- if (stringr::str_detect(language,'-')) sub(".*-","",language) else NULL
str_suffix  <- ifelse (is.null(alternative),'',paste0('-',alternative))
file <- paste0(iso_code,str_suffix,'-character.csv')
df   <- read.csv(paste0(which_folder('data',filter),'/alphabets/',collection,'/',file))
alphabet_size <- nrow(df)
list("language"=language, 'A'=alphabet_size)
})
df = do.call(rbind.data.frame,parameters)
write.csv(df, paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'),row.names = F)
})
# + collections summary
print('tables: collection summaries')
res <- lapply(COLLS, function(collection) {
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
sum_coll <- langs_df %>% mutate(iso_code = NULL) %>% rename(T = X.tokens, n = X.types)
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'))
sum_coll <- merge(sum_coll, A_coll, 'language')
sum_coll <- sum_coll[,c('language','family','script','A','n','T')] %>%
arrange(family,script,language)
write.csv(sum_coll,paste0(which_folder('results',filter),'/coll_summary_',collection,'.csv'))
print(xtable(sum_coll, type = "latex"),
file = paste0(which_folder('latex_tables',filter),'/coll_summary_',collection,".tex"),
include.rownames=FALSE,include.colnames=FALSE, only.contents = TRUE,
hline.after = c(nrow(sum_coll)))
})
# + collections summary
print('tables: collection summaries')
res <- lapply(COLLS, function(collection) {
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
sum_coll <- langs_df %>% mutate(iso_code = NULL) %>% rename(T = X.tokens, n = X.types)
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'))
sum_coll <- merge(sum_coll, A_coll, 'language')
sum_coll <- sum_coll[,c('language','family','script','A','n','T')] %>%
arrange(family,script,language)
write.csv(sum_coll,paste0(which_folder('results',filter),'/coll_summary_',collection,'.csv'))
print(xtable(sum_coll, type = "latex"),
file = paste0(which_folder('latex_tables',filter),'/coll_summary_',collection,".tex"),
include.rownames=FALSE,include.colnames=FALSE, only.contents = F,
hline.after = c(nrow(sum_coll)))
})
res <- lapply(COLLS, function(collection) {
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
sum_coll <- langs_df %>% mutate(iso_code = NULL) %>% rename(T = X.tokens, n = X.types)
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'))
sum_coll <- merge(sum_coll, A_coll, 'language')
sum_coll <- sum_coll[,c('language','family','script','A','n','T')] %>%
arrange(family,script,language)
write.csv(sum_coll,paste0(which_folder('results',filter),'/coll_summary_',collection,'.csv'))
print(xtable(sum_coll, type = "latex"),
file = paste0(which_folder('latex_tables',filter),'/coll_summary_',collection,".tex"),
include.rownames=FALSE,include.colnames=T, only.contents = F,
hline.after = c(nrow(sum_coll)))
})
collection
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
sum_coll <- langs_df %>% mutate(iso_code = NULL) %>% rename(T = X.tokens, n = X.types)
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'))
sum_coll <- merge(sum_coll, A_coll, 'language')
sum_coll <- sum_coll[,c('language','family','script','A','n','T')] %>%
arrange(family,script,language)
sum_coll
xtable(sum_coll, type = "latex")
paste0(which_folder('latex_tables',filter),'/coll_summary_',collection,".tex")
print(xtable(sum_coll, type = "latex"),
file = paste0(which_folder('latex_tables',filter),'/coll_summary_',collection,".tex"),
include.rownames=FALSE,include.colnames=T, only.contents = F,
hline.after = c(nrow(sum_coll)))
res <- lapply(COLLS, function(collection) {
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
sum_coll <- langs_df %>% mutate(iso_code = NULL) %>% rename(T = X.tokens, n = X.types)
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'))
sum_coll <- merge(sum_coll, A_coll, 'language')
sum_coll <- sum_coll[,c('language','family','script','A','n','T')] %>%
arrange(family,script,language)
write.csv(sum_coll,paste0(which_folder('results',filter),'/coll_summary_',collection,'.csv'))
print(xtable(sum_coll, type = "latex"),
file = paste0(which_folder('latex_tables',filter),'/coll_summary_',collection,".tex"),
include.rownames=FALSE,include.colnames=T, only.contents = F,
hline.after = c(nrow(sum_coll)))
})
paste0(which_folder('latex_tables',filter),'/coll_summary_',collection,".tex")
xtable(sum_coll, type = "latex")
res <- lapply(COLLS, function(collection) {
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
sum_coll <- langs_df %>% mutate(iso_code = NULL) %>% rename(T = X.tokens, n = X.types)
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'))
sum_coll <- merge(sum_coll, A_coll, 'language')
sum_coll <- sum_coll[,c('language','family','script','A','n','T')] %>%
arrange(family,script,language)
write.csv(sum_coll,paste0(which_folder('results',filter),'/coll_summary_',collection,'.csv'))
print(xtable(sum_coll, type = "latex"),
file = paste0(which_folder('latex_tables',filter),'/coll_summary_',collection,".tex"),
include.rownames=FALSE,include.colnames=T, only.contents = F,
hline.after = c(nrow(sum_coll)))
})
paste0(which_folder('latex_tables',filter),'/coll_summary_',collection,".tex")
langs_df_pud
source('code/analysis/R_functions.R', encoding="utf-8")
filter
# GLOBALS  --------------------------------------------------------
langs_df_pud <- read.csv(paste0(which_folder('data',filter),"/descriptive_tables/pud.csv"))
langs_df_cv <- read.csv(paste0(which_folder('data',filter),"/descriptive_tables/common_voice.csv")) %>%
shorten_names()
langs_df_pud
# + collections summary
print('tables: collection summaries')
res <- lapply(COLLS, function(collection) {
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
sum_coll <- langs_df %>% mutate(iso_code = NULL) %>% rename(T = X.tokens, n = X.types)
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'))
sum_coll <- merge(sum_coll, A_coll, 'language')
sum_coll <- sum_coll[,c('language','family','script','A','n','T')] %>% arrange(family,script,language)
write.csv(sum_coll,paste0(which_folder('results',filter),'/coll_summary_',collection,'.csv'))
print(xtable(sum_coll, type = "latex"),
file = paste0(which_folder('latex_tables',filter),'/coll_summary_',collection,".tex"),
include.rownames=FALSE,include.colnames=T, only.contents = F,
hline.after = c(nrow(sum_coll)))
})
collection
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
sum_coll <- langs_df %>% mutate(iso_code = NULL) %>% rename(T = X.tokens, n = X.types)
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'))
sum_coll <- merge(sum_coll, A_coll, 'language')
sum_coll <- sum_coll[,c('language','family','script','A','n','T')] %>% arrange(family,script,language)
write.csv(sum_coll,paste0(which_folder('results',filter),'/aaacoll_summary_',collection,'.csv'))
getwd()
setwd("/Users/sonia/Library/Mobile Documents/com~apple~CloudDocs/University/FIB/IQL/IQLproject/IQL-Research-Project-21-22")
# GLOBALS  --------------------------------------------------------
langs_df_pud <- read.csv(paste0(which_folder('data',filter),"/descriptive_tables/pud.csv"))
langs_df_cv <- read.csv(paste0(which_folder('data',filter),"/descriptive_tables/common_voice.csv")) %>%
shorten_names()
langs_df_pud
getwd()
source('code/analysis/R_functions.R', encoding="utf-8")
# GLOBALS  --------------------------------------------------------
langs_df_pud <- read.csv(paste0(which_folder('data',filter),"/descriptive_tables/pud.csv"))
langs_df_pud
filter
paste0(which_folder('data',filter),"/descriptive_tables/pud.csv")
# GLOBALS  --------------------------------------------------------
langs_df_pud <- read.csv(paste0(which_folder('data',filter),"/descriptive_tables/pud.csv"))
langs_df_cv <- read.csv(paste0(which_folder('data',filter),"/descriptive_tables/common_voice.csv")) %>%
shorten_names()
langs_df_pud
# + collections summary
print('tables: collection summaries')
res <- lapply(COLLS, function(collection) {
langs_df <- if (collection == 'pud') langs_df_pud else if (collection == 'cv') langs_df_cv
sum_coll <- langs_df %>% mutate(iso_code = NULL) %>% rename(T = X.tokens, n = X.types)
A_coll   <- read.csv(paste0(which_folder('results',filter),'/alphabet_sisez_',collection,'.csv'))
sum_coll <- merge(sum_coll, A_coll, 'language')
sum_coll <- sum_coll[,c('language','family','script','A','n','T')] %>% arrange(family,script,language)
write.csv(sum_coll,paste0(which_folder('results',filter),'/coll_summary_',collection,'.csv'))
print(xtable(sum_coll, type = "latex"),
file = paste0(which_folder('latex_tables',filter),'/coll_summary_',collection,".tex"),
include.rownames=FALSE,include.colnames=T, only.contents = F,
hline.after = c(nrow(sum_coll)))
})
res <- lapply(COLLS, function(collection) {
if (collection == 'cv') {
lapply(length_defs, function(length_def) {
suffix       <- paste0("_",length_def)
opt_df <- read_file('opt',collection,filter,length_def)
opt_df <- merge(opt_df, select(langs_df_cv,language,family,script))
opt_df <- select(opt_df, language,family,script,L,Lrand,tau,tau_pval,r,r_pval)
print(xtable(opt_df,type = "latex",digits=c(0,0,0,0,2,2,2,-2,2,-2)),math.style.exponents = TRUE,
file = paste0(which_folder('latex_tables',filter),'/',collection,"_opt_scores",suffix,".tex"),
include.rownames=FALSE, include.colnames=FALSE, only.contents = TRUE,hline.after = c(nrow(opt_df)))
})
} else {
opt_df <- read_file('opt',collection,filter)
opt_df <- merge(opt_df, select(langs_df_pud,language,family,script))
opt_df <- select(opt_df, language,family,script,L,Lrand,tau,tau_pval,r,r_pval)
print(xtable(opt_df,type = "latex",digits=c(0,0,0,0,2,2,2,-2,2,-2)),math.style.exponents = TRUE,
file = paste0(which_folder('latex_tables',filter),'/',collection,"_opt_scores_characters.tex"),
include.rownames=FALSE, include.colnames=FALSE, only.contents = TRUE,hline.after = c(nrow(opt_df)))
}
})
