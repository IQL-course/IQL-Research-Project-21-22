data.frame(cutoffs,share_retained_data) %>%
ggplot(aes(share_retained_data,cutoffs)) + geom_point() + geom_line()
ggsave('figures/coefficient_variation.pdf')
# DENSITY PLOT OF OMEGA AND ETA
rows <- lapply(COLLS, function(collection) {
rows <- lapply(length_defs, function(length) {
suffix <- ifelse(collection == 'pud','',paste0("_",length))
length <- ifelse(collection == 'pud','n_chars',length)
read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))[-1] %>%
select(language,eta,omega) %>% mutate(collection = collection, length_def = length)
})
do.call(rbind.data.frame,rows)
})
do.call(rbind.data.frame,rows) %>%
melt(id.vars = c('language','collection','length_def')) %>%
ggplot() + geom_density(aes(x=value,color = length_def)) + facet_grid(rows = vars(collection), cols = vars(variable))
ggsave('figures/opt_scores_density.pdf')
# checks on data - coefficient of variation in cv
rows <- lapply(1:length(ISO_cv), function(i) {
iso_code <- ISO_cv[i]
dialect  <- dialects_cv[i]
read_language(iso_code,'cv',dialect) %>% summarise(coeff_var = stDevDuration/meanDuration)
})
# CHECKS ON DATA
# sd with respect to mean value?
df <- read.csv(here('results','coefficient_variation.csv'))
cutoffs <- seq(0,0.3,0.03)
share_retained_data <- sapply(cutoffs, function(cutoff) round(nrow(filter(df,coeff_var<=cutoff))/nrow(df),3) )
data.frame(cutoffs,share_retained_data) %>%
ggplot(aes(share_retained_data,cutoffs)) + geom_point() + geom_line()
# - DISTRIBUTION OF FREQUENCY VS LENGTH
# bind all dfs and add language
res <- lapply(ISO_cv[1:6], function(iso) read_language(iso,'cv')[-1])
res
ISO_cv[1:6]
all_df <- do.call(rbind,res) %>% mutate(index = 1:nrow(.))
all_df
# identify obs to mark (sample top 90% percentile of freq and length)
top_freq_id <- all_df %>% group_by(language) %>%
group_modify(~head(.x,2)) %>% dplyr::select(index)
top_length_id <- all_df %>% arrange(desc(length)) %>%
group_by(language) %>% group_modify(~head(.x,2)) %>% dplyr::select(index)
all_df$lab <- ifelse(all_df$index %in% c(top_freq_id$index,top_length_id$index),
all_df$word,"")
all_df
lang_to_use <- subset(all_df, language %in% ISO_cv[1:6])
melt(all_df,id.vars = c('word','language','index','lab'))
all_df
iso <- 'it'
read_language(iso,'cv')[-1]
read_language(iso,'cv')
# - DISTRIBUTION OF FREQUENCY VS LENGTH
## CV
res <- lapply(ISO_cv[1:6], function(iso) read_language(iso,'cv'))
all_df <- do.call(rbind,res) %>% mutate(index = 1:nrow(.))
# identify obs to mark (sample top 90% percentile of freq and length)
top_freq_id <- all_df %>% group_by(language) %>%
group_modify(~head(.x,2)) %>% dplyr::select(index)
top_length_id <- all_df %>% arrange(desc(length)) %>%
group_by(language) %>% group_modify(~head(.x,2)) %>% dplyr::select(index)
all_df$lab <- ifelse(all_df$index %in% c(top_freq_id$index,top_length_id$index),
all_df$word,"")
plot <- melt(all_df,id.vars = c('frequency','word','language','index','lab')) %>% rename(length_type = variable) %>%
ggplot(aes(x=frequency,y=length_type,label = lab)) +
geom_point(color = ifelse(lang_to_use$lab != "",  "red","grey50")) + facet_wrap(~language) +
geom_text_repel(max.overlaps = 10) +
scale_y_log10() + scale_x_log10()
plot
plot <- melt(all_df,id.vars = c('frequency','word','language','index','lab')) %>% rename(length_type = variable) %>%
ggplot(aes(x=frequency,y=length_type,label = lab)) +
geom_point(color = ifelse(lang_to_use$lab != "",  "red","grey50")) + facet_wrap(~language) +
geom_text_repel(max.overlaps = 10)
plot
all_df <- melt(all_df,id.vars = c('frequency','word','language','index','lab')) %>% rename(length_type = variable)
ggplot(all_df,aes(x=frequency, y=length_type, label = lab)) +
geom_point(color = ifelse(lang_to_use$lab != "",  "red","grey50")) + facet_wrap(~language) +
geom_text_repel(max.overlaps = 10)
ggplot(all_df,aes(x=frequency, y=length_type, label = lab)) +
geom_point(color = ifelse(all_df$lab != "",  "red","grey50")) + facet_wrap(~language) +
geom_text_repel(max.overlaps = 10)
ggplot(all_df,aes(x=frequency, y=value, color=length_type)) +
geom_point() + facet_wrap(~language) +
geom_text_repel(max.overlaps = 10)
ggplot(all_df,aes(x=frequency, y=value, color=length_type)) +
geom_point() + facet_wrap(~language)
# - DISTRIBUTION OF FREQUENCY VS LENGTH
## CV
res <- lapply(ISO_cv[1:6], function(iso) read_language(iso,'cv') %>% select(-stDevDuration))
all_df <- do.call(rbind,res) %>% mutate(index = 1:nrow(.)) %>%
melt(all_df,id.vars = c('frequency','word','language','index','lab')) %>%
rename(length_type = variable)
all_df <- do.call(rbind,res) %>% mutate(index = 1:nrow(.)) %>%
melt(all_df,id.vars = c('frequency','word','language','index')) %>%
rename(length_type = variable)
all_df <- do.call(rbind,res) %>%
melt(all_df,id.vars = c('frequency','word','language')) %>%
rename(length_type = variable)
all_df <- do.call(rbind,res) %>%
melt(id.vars = c('frequency','word','language')) %>%
rename(length_type = variable)
ggplot(all_df,aes(x=frequency, y=value, color=length_type)) +
geom_point() + facet_wrap(~language) + scale_x_log10() + scale_y_log10()
labs_pud <- langs_pud; names(labs_pud) <- ISO_pud
labs_cv <- langs_cv; names(labs_cv) <- ISO_cv
labs_cv
ggplot(all_df,aes(x=frequency, y=value, color=length_type)) + labs(y='length')
ggplot(all_df,aes(x=frequency, y=value, color=length_type)) + labs(y='length') +
geom_point() + facet_wrap(~language,labeller = labeller(language=labs_cv)) +
scale_x_log10() + scale_y_log10()
ggsave('figures/lengthVSfrequency_cv.pdf')
## PUD
res <- lapply(ISO_pud[1:6], function(iso) read_language(iso,'pud'))
res
## PUD
res <- lapply(ISO_pud[1:6], function(iso) read_language(iso,'pud') %>% mutate(language = iso))
all_df <- do.call(rbind,res)
ggplot(all_df,aes(x=frequency, y=length)) +
geom_point() + facet_wrap(~language,labeller = labeller(language=labs_pud)) +
scale_x_log10() + scale_y_log10()
ggplot(all_df,aes(x=frequency, y=length)) +
geom_point(color='blue') + facet_wrap(~language,labeller = labeller(language=labs_pud)) +
scale_x_log10() + scale_y_log10()
ggsave('figures/lengthVSfrequency_pud.pdf')
library('xtable')
# - 1 -
lapply(COLLS, function(collection) {
if (collection == 'cv') {
lapply(length_defs, function(length) {
suffix           <- paste0("_",length)
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))
print(xtable(opt_df, caption = "CV: Optimality scores.",label = paste0("tab:opt_scores",collection,suffix),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores",suffix,".tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
})
} else {
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,'.csv')))
print(xtable(opt_df, caption = "PUD: Optimality scores.",label = paste0("tab:opt_scores",collection),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores.tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
}
})
# - 1 -
lapply(COLLS, function(collection) {
if (collection == 'cv') {
lapply(length_defs, function(length) {
suffix           <- paste0("_",length)
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))
print(xtable(opt_df, caption = "CV: Optimality scores.",label = paste0("tab:opt_scores_",collection,suffix),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores",suffix,".tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
})
} else {
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,'.csv')))
print(xtable(opt_df, caption = "PUD: Optimality scores.",label = paste0("tab:opt_scores_",collection),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores.tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
}
})
# CHECKS ON DATA
# sd with respect to mean value?
df <- read.csv(here('results','coefficient_variation.csv'))
df
# checks on data - coefficient of variation in cv
rows <- lapply(1:length(ISO_cv), function(i) {
iso_code <- ISO_cv[i]
dialect  <- dialects_cv[i]
read_language(iso_code,'cv',dialect) %>%
summarise(meanDeviation,stDevDuration,coeff_var = stDevDuration/meanDuration)
})
ISO_cv
iso_code <- ISO_cv[i]
iso_code
dialect  <- dialects_cv[i]
read_language(iso_code,'cv',dialect) %>%
summarise(meanDeviation,stDevDuration,coeff_var = stDevDuration/meanDuration)
read_language(iso_code,'cv',dialect)
# checks on data - coefficient of variation in cv
rows <- lapply(1:length(ISO_cv), function(i) {
iso_code <- ISO_cv[i]
dialect  <- dialects_cv[i]
read_language(iso_code,'cv',dialect) %>%
summarise(meanDuration,stDevDuration,coeff_var = stDevDuration/meanDuration)
})
df <- do.call(rbind,rows)
write.csv(df, here('results','coefficient_variation.csv'))
df
ggplot(df) + geom_point(aes(meanDuration,stDevDuration))
ggplot(df) + geom_point(aes(reorder(meanDuration,stDevDuration),stDevDuration))
ggplot(sample_n(df, 300000)) + geom_point(aes(reorder(meanDuration,stDevDuration),stDevDuration))
ggplot(sample_n(df, 30000)) + geom_point(aes(reorder(meanDuration,stDevDuration),stDevDuration))
ggplot(sample_n(df, 300)) + geom_point(aes(reorder(meanDuration,stDevDuration),stDevDuration))
ggplot(sample_n(df, 3000)) + geom_point(aes(reorder(meanDuration,stDevDuration),stDevDuration))
ggplot(sample_n(df, 10000)) + geom_point(aes(reorder(meanDuration,stDevDuration),stDevDuration))
# - 1 -
lapply(COLLS, function(collection) {
if (collection == 'cv') {
lapply(length_defs, function(length) {
suffix           <- paste0("_",length)
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))[-1]
print(xtable(opt_df, caption = "CV: Optimality scores.",label = paste0("tab:opt_scores_",collection,suffix),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores",suffix,".tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
})
} else {
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,'.csv')))[-1]
print(xtable(opt_df, caption = "PUD: Optimality scores.",label = paste0("tab:opt_scores_",collection),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores.tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
}
})
length_defs
# - 1 -
lapply(COLLS, function(collection) {
if (collection == 'cv') {
lapply(length_defs, function(length) {
suffix           <- paste0("_",length)
label_length <- switch(length_defs,
length_defs[1] = 'mean duration', length_defs[2] = 'median duration', length_defs[3] = 'number of characters')
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))[-1]
print(xtable(opt_df, caption = paste0("CV: Optimality scores. Length is defined as ",label_length),label = paste0("tab:opt_scores_",collection,suffix),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores",suffix,".tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
})
} else {
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,'.csv')))[-1]
print(xtable(opt_df, caption = "PUD: Optimality scores.",label = paste0("tab:opt_scores_",collection),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores.tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
}
})
# - 1 -
lapply(COLLS, function(collection) {
if (collection == 'cv') {
lapply(length_defs, function(length) {
suffix           <- paste0("_",length)
label_length <- switch(length_defs,
length_defs[1] = 'mean duration', length_defs[2] = 'median duration', length_defs[3] = 'number of characters')
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))[-1]
print(xtable(opt_df, caption = paste0("CV: Optimality scores. Length is defined as ",label_length),
label = paste0("tab:opt_scores_",collection,suffix),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores",suffix,".tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
})
} else {
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,'.csv')))[-1]
print(xtable(opt_df, caption = "PUD: Optimality scores.",label = paste0("tab:opt_scores_",collection),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores.tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
}
})
# - 1 -
lapply(COLLS, function(collection) {
if (collection == 'cv') {
lapply(length_defs, function(length) {
suffix       <- paste0("_",length)
label_length <- switch(length_defs,
length_defs[1] = 'mean duration', length_defs[2] = 'median duration', length_defs[3] = 'number of characters')
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))[-1]
print(xtable(opt_df, caption = paste0("CV: Optimality scores. Length is defined as ",label_length),
label = paste0("tab:opt_scores_",collection,suffix),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores",suffix,".tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
})
} else {
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,'.csv')))[-1]
print(xtable(opt_df, caption = "PUD: Optimality scores.",label = paste0("tab:opt_scores_",collection),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores.tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
}
})
# - 1 -
lapply(COLLS, function(collection) {
if (collection == 'cv') {
lapply(length_defs, function(length) {
suffix       <- paste0("_",length)
label_length <- switch(length,
length_defs[1] = 'mean duration', length_defs[2] = 'median duration', length_defs[3] = 'number of characters')
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))[-1]
print(xtable(opt_df, caption = paste0("CV: Optimality scores. Length is defined as ",label_length),
label = paste0("tab:opt_scores_",collection,suffix),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores",suffix,".tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
})
} else {
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,'.csv')))[-1]
print(xtable(opt_df, caption = "PUD: Optimality scores.",label = paste0("tab:opt_scores_",collection),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores.tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
}
})
collection <- 'cv'
lapply(length_defs, function(length) {
suffix       <- paste0("_",length)
label_length <- switch(length,
length_defs[1] = 'mean duration', length_defs[2] = 'median duration', length_defs[3] = 'number of characters')
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))[-1]
print(xtable(opt_df, caption = paste0("CV: Optimality scores. Length is defined as ",label_length),
label = paste0("tab:opt_scores_",collection,suffix),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores",suffix,".tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
})
length_defs
length <- length_defs[1]
suffix       <- paste0("_",length)
label_length <- switch(length,
length_defs[1] = 'mean duration', length_defs[2] = 'median duration', length_defs[3] = 'number of characters')
?switch
length
lapply(length_defs, function(length_def) {
suffix       <- paste0("_",length_def)
label_length <- switch(length_def,
length_defs[1] = 'mean duration', length_defs[2] = 'median duration', length_defs[3] = 'number of characters')
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))[-1]
print(xtable(opt_df, caption = paste0("CV: Optimality scores. Length is defined as ",label_length),
label = paste0("tab:opt_scores_",collection,suffix),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores",suffix,".tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
})
lapply(length_defs, function(length_def) {
suffix       <- paste0("_",length_def)
label_length <- switch(length_def,
length_defs[1] = 'mean duration', length_defs[2] = 'median duration', length_defs[3] = 'number of characters')
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))[-1]
print(xtable(opt_df, caption = paste0("CV: Optimality scores. Length is defined as ",label_length),
label = paste0("tab:opt_scores_",collection,suffix),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores",suffix,".tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
})
length_def <- length_defs[1]
label_length <- switch(length_def,
length_defs[1] = 'mean duration', length_defs[2] = 'median duration', length_defs[3] = 'number of characters')
length_def
length_defs[1]
label_length <- switch(length_def,
"meanDuration" = 'mean duration', "medianDuration" = 'median duration', 'n_chars' = 'number of characters')
# - 1 -
lapply(COLLS, function(collection) {
if (collection == 'cv') {
lapply(length_defs, function(length_def) {
suffix       <- paste0("_",length_def)
label_length <- switch(length_def,
"meanDuration" = 'mean duration', "medianDuration" = 'median duration', 'n_chars' = 'number of characters')
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))[-1]
print(xtable(opt_df, caption = paste0("CV: Optimality scores. Length is defined as ",label_length),
label = paste0("tab:opt_scores_",collection,suffix),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores",suffix,".tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
})
} else {
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,'.csv')))[-1]
print(xtable(opt_df, caption = "PUD: Optimality scores.",label = paste0("tab:opt_scores_",collection),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores.tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
}
})
# - 1 - optimality scores
lapply(COLLS, function(collection) {
if (collection == 'cv') {
lapply(length_defs, function(length_def) {
suffix       <- paste0("_",length_def)
label_length <- switch(length_def,
"meanDuration" = 'mean duration', "medianDuration" = 'median duration', 'n_chars' = 'number of characters')
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))[-1]
print(xtable(opt_df, caption = paste0("CV: Optimality scores. Length is defined as ",label_length),
label = paste0("tab:opt_scores_",collection,suffix),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores",suffix,".tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
})
} else {
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,'.csv')))[-1] %>% select(-dialect)
print(xtable(opt_df, caption = "PUD: Optimality scores.",label = paste0("tab:opt_scores_",collection),type = "latex"),
file = here('latex_tables',paste0(collection,"_opt_scores.tex")),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"))
}
})
length_def
collection
suffix       <- paste0("_",length_def)
label_length <- switch(length_def,
"meanDuration" = 'mean duration', "medianDuration" = 'median duration', 'n_chars' = 'number of characters')
opt_df <- read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))[-1]
opt_df
summary(opt_df$omega)
library(data.table)
rows_cv <- lapply(length_defs, function(length_def) {
suffix       <- paste0("_",length_def)
label_length <- switch(length_def,
"meanDuration" = 'mean duration', "medianDuration" = 'median duration', 'n_chars' = 'number of characters')
read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))[-1]
})
rows_cv
rows_cv <- lapply(length_defs, function(length_def) {
suffix       <- paste0("_",length_def)
label_length <- switch(length_def,
"meanDuration" = 'mean duration', "medianDuration" = 'median duration', 'n_chars' = 'number of characters')
read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))[-1] %>%
select(omega) %>% mutate(collection = paste(collection,length_def))
})
rows_cv
rows_cv <- lapply(length_defs, function(length_def) {
suffix       <- paste0("_",length_def)
label_length <- switch(length_def,
"meanDuration" = 'mean duration', "medianDuration" = 'median duration', 'n_chars' = 'number of characters')
read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))[-1] %>%
select(omega) %>% mutate(collection = paste(collection,length_def,sep='-'))
})
rows_cv
# summary tables
rows <- lapply(COLLS, function(collection) {
if (collection == 'cv') {
rows_cv <- lapply(length_defs, function(length_def) {
suffix       <- paste0("_",length_def)
label_length <- switch(length_def,
"meanDuration" = 'mean duration', "medianDuration" = 'median duration', 'n_chars' = 'number of characters')
read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))[-1] %>%
select(omega) %>% mutate(collection = paste(collection,length_def,sep='-'))
})
do.call(rbind,rows_cv)
} else {
read.csv(here('results',paste0('optimality_scores_',collection,'.csv')))[-1] %>%
select(omega) %>% mutate(collection = paste(collection,'n_chars',sep='-'))
}
})
rows
do.call(rbind,rows)
df <- do.call(rbind,rows)
setDT(df)
df[, as.list(summary(dt)), by = collection]
df[, as.list(summary(df)), by = collection]
df[, as.list(summary(df$omega)), by = collection]
df
df[, as.list(summary(omega)), by = collection]
summ <- df[, as.list(summary(omega)), by = collection]
summ
print(xtable(summ, caption = "Summary statistics of $\Omega$ for each collection and definition of length",
label = paste0("tab:opt_scores_summary"),type = "latex"),
file = here('latex_tables',"opt_scores_summary.tex"),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"),sanitize.text.function = function(x) {x})
print(xtable(summ, caption = "Summary statistics of $\Omega$ for each collection and definition of length",
label = paste0("tab:opt_scores_summary"),type = "latex"),
file = here('latex_tables',"opt_scores_summary.tex"),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"),sanitize.text.function = function(x) {x})
xtable(summ, caption = "Summary statistics of $\Omega$ for each collection and definition of length",
label = paste0("tab:opt_scores_summary"),type = "latex")
xtable(summ, caption = "Summary statistics of $\Omega$ for each collection and definition of length",
label = "tab:opt_scores_summary",type = "latex")
caption = "Summary statistics of $\Omega$ for each collection and definition of length"
print(xtable(summ, caption = "Summary statistics of $\\Omega$ for each collection and definition of length",
label = "tab:opt_scores_summary", type = "latex"),
file = here('latex_tables',"opt_scores_summary.tex"),
caption.placement = "top",include.rownames=FALSE,
table.placement = getOption("xtable.table.placement", "H"), sanitize.text.function = function(x) {x})
summ
# DENSITY PLOT OF OMEGA AND ETA
rows <- lapply(COLLS, function(collection) {
rows <- lapply(length_defs, function(length) {
suffix <- ifelse(collection == 'pud','',paste0("_",length))
length <- ifelse(collection == 'pud','n_chars',length)
read.csv(here('results',paste0('optimality_scores_',collection,suffix,'.csv')))[-1] %>%
select(language,eta,omega) %>% mutate(collection = collection, length_def = length)
})
do.call(rbind.data.frame,rows)
})
do.call(rbind.data.frame,rows) %>%
melt(id.vars = c('language','collection','length_def')) %>%
ggplot() + geom_density(aes(x=value,color = length_def)) + facet_grid(rows = vars(collection), cols = vars(variable))
do.call(rbind.data.frame,rows)
df <- do.call(rbind.data.frame,rows)
df
df <- do.call(rbind.data.frame,rows) %>%
melt(id.vars = c('language','collection','length_def'))
df
means <- df %>% group_by(collection,length_def,variable) %>% summarise(mean(value))
means
ggplot(df) + geom_density(aes(x=value,color = length_def)) + facet_grid(rows = vars(collection), cols = vars(variable)) +
geom_vline(aes(xintercept=means))
ggplot(df) + geom_density(aes(x=value,color = length_def)) + facet_grid(rows = vars(collection), cols = vars(variable)) +
geom_vline(aes(x=means))
means
means <- df %>% group_by(collection,length_def,variable) %>% summarise(meanvalue = mean(value))
ggplot(df) + geom_density(aes(x=value,color = length_def)) + facet_grid(rows = vars(collection), cols = vars(variable)) +
geom_vline(data=means, aes(x=meanvalue))
ggplot(df) + geom_density(aes(x=value,color = length_def)) + facet_grid(rows = vars(collection), cols = vars(variable)) +
geom_vline(data=means, aes(xintercept=meanvalue))
ggplot(df) + geom_density(aes(x=value,color = length_def)) + facet_grid(rows = vars(collection), cols = vars(variable)) +
geom_vline(data=means, aes(xintercept=meanvalue, color = length_def))
ggplot(df) + geom_density(aes(x=value,color = length_def)) + facet_grid(rows = vars(collection), cols = vars(variable)) +
geom_vline(data=means, aes(xintercept=meanvalue, color = length_def),linetype='dashed')
ggsave('figures/opt_scores_density.pdf')
