source('code/analysis/R_functions.R', encoding="utf-8")
setwd("~/Library/Mobile Documents/com~apple~CloudDocs/FIB/IQL/project/IQL-Research-Project-21-22/code/analysis")
setwd("~/Library/Mobile Documents/com~apple~CloudDocs/FIB/IQL/project/IQL-Research-Project-21-22")
source('code/analysis/R_functions.R', encoding="utf-8")
filter <- T
# GLOBALS  --------------------------------------------------------
## pud
langs_df_pud <- read.csv(here(which_folder('data',filter),"descriptive_tables/pud.csv"))
## cv
langs_df_cv <- read.csv(here(which_folder('data',filter),"descriptive_tables/common_voice.csv")) %>%
shorten_names()
collection <- 'cv'
print(collection)
lapply(length_defs, function(length_def) {
suffix     <- paste0("_",length_def)
scores_df <- read.csv(here(which_folder('results',filter),paste0('scores_convergence_',collection,suffix,'.csv')))[-1]  %>%
mutate(t = rep(sample_sizes,length(languages)))
melt_df   <- reshape2::melt(scores_df, id.vars=c('language','t')) %>%
rename(score = value) %>% na.omit()
melt_df_1 <- subset(melt_df, language %in% languages[1:23])
plot_convergence(melt_df_1)
ggsave(here(which_folder('figures',filter),paste0('convergence_',collection,suffix,'_1.pdf')),
device = cairo_pdf, width = 10, height = 6)
melt_df_2 <- subset(melt_df, language %in% languages[24:46])
plot_convergence(melt_df_2)
ggsave(here(which_folder('figures',filter),paste0('convergence_',collection,suffix,'_2.pdf')),
device = cairo_pdf, width = 10, height = 6)
})
sample_sizes <- c(2^seq(3,23))
lapply(length_defs, function(length_def) {
suffix     <- paste0("_",length_def)
scores_df <- read.csv(here(which_folder('results',filter),paste0('scores_convergence_',collection,suffix,'.csv')))[-1]  %>%
mutate(t = rep(sample_sizes,length(languages)))
melt_df   <- reshape2::melt(scores_df, id.vars=c('language','t')) %>%
rename(score = value) %>% na.omit()
melt_df_1 <- subset(melt_df, language %in% languages[1:23])
plot_convergence(melt_df_1)
ggsave(here(which_folder('figures',filter),paste0('convergence_',collection,suffix,'_1.pdf')),
device = cairo_pdf, width = 10, height = 6)
melt_df_2 <- subset(melt_df, language %in% languages[24:46])
plot_convergence(melt_df_2)
ggsave(here(which_folder('figures',filter),paste0('convergence_',collection,suffix,'_2.pdf')),
device = cairo_pdf, width = 10, height = 6)
})
languages <- if (collection=='pud') langs_df_pud$language else langs_df_cv$language
languages <- sort(languages)
if (collection == 'cv') {
print(collection)
lapply(length_defs, function(length_def) {
suffix     <- paste0("_",length_def)
scores_df <- read.csv(here(which_folder('results',filter),paste0('scores_convergence_',collection,suffix,'.csv')))[-1]  %>%
mutate(t = rep(sample_sizes,length(languages)))
melt_df   <- reshape2::melt(scores_df, id.vars=c('language','t')) %>%
rename(score = value) %>% na.omit()
melt_df_1 <- subset(melt_df, language %in% languages[1:23])
plot_convergence(melt_df_1)
ggsave(here(which_folder('figures',filter),paste0('convergence_',collection,suffix,'_1.pdf')),
device = cairo_pdf, width = 10, height = 6)
melt_df_2 <- subset(melt_df, language %in% languages[24:46])
plot_convergence(melt_df_2)
ggsave(here(which_folder('figures',filter),paste0('convergence_',collection,suffix,'_2.pdf')),
device = cairo_pdf, width = 10, height = 6)
})
} else if (collection == 'pud') {
print(collection)
suffix <- '_characters'
scores_df <- read.csv(here(which_folder('results',filter),paste0('scores_convergence_',collection,suffix,'.csv')))[-1]  %>%
mutate(t = rep(sample_sizes,length(languages)))
melt_df   <- reshape2::melt(scores_df, id.vars=c('language','t')) %>%
rename(score = value) %>% na.omit()
plot_convergence(melt_df)
ggsave(here(which_folder('figures',filter),paste0('convergence_',collection,suffix,'.pdf')),
device = cairo_pdf, width = 10, height = 6)
}
